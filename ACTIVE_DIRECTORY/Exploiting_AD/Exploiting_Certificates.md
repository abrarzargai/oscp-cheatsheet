We want to **pretend to be a powerful user** (like the Domain Admin) on the network â€” **without knowing their password**.

Sounds crazy? Letâ€™s break it down.

## ðŸªª Imagine This Like a Fake ID Trick

Letâ€™s say your office building has:

- ðŸ§ A security guard (Kerberos)
- ðŸªª Who only lets people in **if they show a valid ID**
- âœ… Some people get real IDs from a trusted printer (Certificate Authority)

Nowâ€¦ what if:

- You found **a printer in the hallway** (a vulnerable certificate template)
- That printer **lets you make your own ID**
- And even lets you **write someone elseâ€™s name on it** (like â€œCEOâ€)
- And everyone **trusts any ID made by that printer**

Guess what? You can now **walk right past the guard**, claiming to be the CEO.

That's **exactly what this attack does â€” but digitally.**

## ðŸ’¡ Real-World Breakdown of the Exploit

Letâ€™s go step by step, like a simple story:

### âœ… 1. We Already Got Access to a Server (e.g., `THMSERVER2`)

From earlier attacks, we can RDP into this server. That gives us a place to **run commands inside the network**.

### âœ… 2. We Look for Vulnerable Certificate Templates

We run this:

```powershell
certutil -template -v
```

This shows all the "printers" (certificate templates) that issue digital IDs.

We're looking for **a template that's badly set up** â€” one that:

- âœ… Lets anyone ask for a certificate (we have permissions)
- âœ… Lets us **write any name** on the cert (like "Administrator") â† this is done using the **SAN**
- âœ… Lets us **take the cert home** (export the private key)
- âœ… Can be used for **logins** (called "Client Authentication")

This combo is like finding **a printer in the hallway that prints VIP badges with any name you want** ðŸ˜Ž

### âœ… 3. We Request a Certificate as "Administrator"

Using MMC (Windows GUI tool):

- We say: "Hey printer, make me a certificate"
- On the form, we say: â€œName = Administratorâ€
- We choose the vulnerable template
- We save the certificate as a `.pfx` file with a password

Now we have a **digital ID that says â€œIâ€™m Administratorâ€**, and it's signed by a **trusted printer** (Certificate Authority).

### âœ… 4. We Use Rubeus to Ask for a Kerberos Ticket (TGT)

This is like showing your fake ID to the guard:

```bash
Rubeus.exe asktgt /user:Administrator /certificate:mycert.pfx /password:123
```

Even though we never knew the real Admin password...

ðŸ‘‰ The Kerberos system sees a **valid certificate signed by the CA**

ðŸ‘‰ The name on it says â€œAdministratorâ€

âœ… So it says: â€œSure, hereâ€™s a TGT for the Administrator!â€

### âœ… 5. We Use Mimikatz to Use That Ticket

With `Mimikatz`, we say:

> "Load this TGT into memory. From now on, any tool I run should act as if Iâ€™m Administrator."
> 

```powershell
kerberos::ptt administrator.kirbi
```

Boom ðŸ’¥

You are now **Administrator in memory**.

### âœ… 6. We Try Accessing the Domain Controller

We try:

```
dir \\THMDC.za.tryhackme.loc\c$\
```

If we can access the C drive of the **Domain Controller** â€”

That means we now have **Tier 0 access** â€” the **keys to the kingdom**.
