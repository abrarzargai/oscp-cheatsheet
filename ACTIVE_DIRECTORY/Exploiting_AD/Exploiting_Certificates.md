We want to **pretend to be a powerful user** (like the Domain Admin) on the network — **without knowing their password**.

Sounds crazy? Let’s break it down.

## 🪪 Imagine This Like a Fake ID Trick

Let’s say your office building has:

- 🧍 A security guard (Kerberos)
- 🪪 Who only lets people in **if they show a valid ID**
- ✅ Some people get real IDs from a trusted printer (Certificate Authority)

Now… what if:

- You found **a printer in the hallway** (a vulnerable certificate template)
- That printer **lets you make your own ID**
- And even lets you **write someone else’s name on it** (like “CEO”)
- And everyone **trusts any ID made by that printer**

Guess what? You can now **walk right past the guard**, claiming to be the CEO.

That's **exactly what this attack does — but digitally.**

## 💡 Real-World Breakdown of the Exploit

Let’s go step by step, like a simple story:

### ✅ 1. We Already Got Access to a Server (e.g., `THMSERVER2`)

From earlier attacks, we can RDP into this server. That gives us a place to **run commands inside the network**.

### ✅ 2. We Look for Vulnerable Certificate Templates

We run this:

```powershell
certutil -template -v
```

This shows all the "printers" (certificate templates) that issue digital IDs.

We're looking for **a template that's badly set up** — one that:

- ✅ Lets anyone ask for a certificate (we have permissions)
- ✅ Lets us **write any name** on the cert (like "Administrator") ← this is done using the **SAN**
- ✅ Lets us **take the cert home** (export the private key)
- ✅ Can be used for **logins** (called "Client Authentication")

This combo is like finding **a printer in the hallway that prints VIP badges with any name you want** 😎

### ✅ 3. We Request a Certificate as "Administrator"

Using MMC (Windows GUI tool):

- We say: "Hey printer, make me a certificate"
- On the form, we say: “Name = Administrator”
- We choose the vulnerable template
- We save the certificate as a `.pfx` file with a password

Now we have a **digital ID that says “I’m Administrator”**, and it's signed by a **trusted printer** (Certificate Authority).

### ✅ 4. We Use Rubeus to Ask for a Kerberos Ticket (TGT)

This is like showing your fake ID to the guard:

```bash
Rubeus.exe asktgt /user:Administrator /certificate:mycert.pfx /password:123
```

Even though we never knew the real Admin password...

👉 The Kerberos system sees a **valid certificate signed by the CA**

👉 The name on it says “Administrator”

✅ So it says: “Sure, here’s a TGT for the Administrator!”

### ✅ 5. We Use Mimikatz to Use That Ticket

With `Mimikatz`, we say:

> "Load this TGT into memory. From now on, any tool I run should act as if I’m Administrator."
> 

```powershell
kerberos::ptt administrator.kirbi
```

Boom 💥

You are now **Administrator in memory**.

### ✅ 6. We Try Accessing the Domain Controller

We try:

```
dir \\THMDC.za.tryhackme.loc\c$\
```

If we can access the C drive of the **Domain Controller** —

That means we now have **Tier 0 access** — the **keys to the kingdom**.
